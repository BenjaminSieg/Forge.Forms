<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:collections="clr-namespace:Forge.Forms.Collections">

    <ControlTemplate x:Key="DynamicDataGridTemplate" TargetType="{x:Type collections:DynamicDataGrid}">
        <Grid>
            <DataGrid
                Name="PART_DataGrid" AutoGenerateColumns="False"
                CanUserAddRows="False"
                ItemsSource="{TemplateBinding ItemsSource}">
                <DataGrid.Columns>
                    <DataGridTemplateColumn>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="EDIT"
                                        Command="{x:Static collections:DynamicDataGrid.UpdateItemCommand}"
                                        CommandParameter="{Binding}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="REMOVE"
                                        Command="{x:Static collections:DynamicDataGrid.RemoveItemCommand}"
                                        CommandParameter="{Binding}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
            
            <Button VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0,0,10,10"
                    Command="{x:Static collections:DynamicDataGrid.CreateItemCommand}"
                    Content="ADD NEW ITEM" />

        </Grid>
    </ControlTemplate>

    <Style TargetType="{x:Type collections:DynamicDataGrid}">
        <Setter Property="Template" Value="{StaticResource DynamicDataGridTemplate}" />
    </Style>

</ResourceDictionary>